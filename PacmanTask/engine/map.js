'use strict'

const _enum = {
    air:        '0',
    wall:       '1',
    player:     '2',
    ghost:      '3',
    food:       '4',
    powerup:    '5',
    info:       '9'
}

const default_level = {
    map_width: 43,
    map_height: 42,
    map: [
        '1111111111111111111111111111111111111111111',
        '1111111111111111111111111111111111111111111',
        '1100000000000000000000000000000000000000011',
        '1100000999900990009900909000990090090000011',
        '1100000900909009090009090909009099090000011',
        '1100000900909009090009090909009099090000011',
        '1100000999909999090009090909999090990000011',
        '1100000900009009009909000909009090090000011',
        '1100000000000000000000000000000000000000011',
        '1111111111111111111111111111111111111111111',
        '1000000144444444444441444444444444410000001',
        '1000000141411111111141411111111141410000001',
        '1111111141544444444141414444444451411111111',
        '0000000441111111114141414111111111440000000',
        '1111111144444444444141414444444444411111111',
        '1000000141111141414445444141411111410000001',
        '1000000144444141411141411141414444410000001',
        '1000000141114141444441444441414111410000001',
        '1000000141014141111141411111414101410000001',
        '1000000141114144444444444444414111410000001',
        '1000000154444441114113114111444444510000001',
        '1000000111111144414133314144411111110000001',
        '1000000144444141414111114141414444410000001',
        '1000000141414141414444444141414141410000001',
        '1000000141414141414111114141414141410000001',
        '1000000144444441444445444441444444410000001',
        '1000000141111411141411141411141111410000001',
        '1111111141444414441442441444144441411111111',
        '0000000444411414111114111114141144440000000',
        '1111111141444415441444441445144441411111111',
        '1000000141111411141411141411141111410000001',
        '1000000154444444144444444414444444510000001',
        '1111111111111111111111111111111111111111111',
        '1100000000000000000000000000000000000000011',
        '1100000000099999099990099000909000000000011',
        '1100000000000900090000900909090900000000011',
        '1100000000000900099990900909090900000000011',
        '1100000000000900090000999909090900000000011',
        '1100000000000900099990900909000900000000011',
        '1100000000000000000000000000000000000000011',
        '1111111111111111111111111111111111111111111',
        '1111111111111111111111111111111111111111111'
    ],

    checkAdjacents: function(x, y)
    {
        let left = false,
            right = false,
            up = false,
            down = false;
        let wall = _enum.wall;

        if(y != 0 && this.map[x][y-1] != wall)
            left = true;
        if(y != (this.map_width - 1) && this.map[x][y+1] != wall)
            right = true;
        if(x != 0 && this.map[x-1][y] != wall)
            up = true;
        if(x != (this.map_height - 1) && this.map[x+1][y] != wall)
            down = true;

        return [left, right, up, down];
    }
}

const defaultSpeed = 0.005;
const playerEvents = {
    gameOver:   0, // no used
    powered:    1,
    foodeat:    2,
    noEvent:    3
}

let foods = 0;
let ghostSpeed = defaultSpeed;
let powerUpTime = 1000 * 12;